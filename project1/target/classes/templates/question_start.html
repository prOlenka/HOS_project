<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="min-width=device-width, min-height=device-height, initial-scale=1.0" />
  <link rel="stylesheet" href="../question_start.css" />
  <title>Вопросы</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script>
    function checkAnswer(selectedAnswer) {
      $.post('/check_answer', { selectedAnswer: selectedAnswer }, function(response) {
        if (response.trim() === 'right_answer') {  // Проверка на точное совпадение
          window.location.href = '/right_answer';  // Выполняем редирект
        } else {
          showError('Неправильный ответ, попробуйте еще раз.');
          $('#question-container').html($(response).find('#question-container').html());
        }
      });
    }

    function showError(message) {
      const errorDiv = document.createElement('div');
      errorDiv.innerText = message;
      errorDiv.style.position = 'absolute';
      errorDiv.style.top = '10px';
      errorDiv.style.left = '50%';
      errorDiv.style.transform = 'translateX(-50%)';
      errorDiv.style.backgroundColor = 'red';
      errorDiv.style.color = 'white';
      errorDiv.style.padding = '10px';
      errorDiv.style.borderRadius = '5px';
      errorDiv.style.fontSize = '16px';
      errorDiv.style.zIndex = '100';

      document.body.appendChild(errorDiv);
      setTimeout(() => {
        document.body.removeChild(errorDiv);
      }, 2000);
    }
  </script>
  <style>
    .back-button {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 10px 20px;
      background-color: #3a9319;
      color: white;
      font-size: 1rem;
      border: none;
      border-radius: 5px;
      text-decoration: none;
      text-align: center;
      cursor: pointer;
      z-index: 100;
    }

    .back-button:hover {
      background-color: #348b14;
    }
  </style>
</head>
<body>
<main>
  <div class="container">
    <div class="spacer"></div>
    <div class="question" id="question-container">
      <th:block th:each="qList : ${que}">
        <h1 th:text="${qList}" class="question-text" style="text-shadow: 1px 1px white"></h1>
      </th:block>
    </div>
    <div class="spacer"></div>
    <div class="buttons">
      <div th:each="answer : ${ans}">
        <input type="button" class="button" th:value="${answer}" th:data-answer="${answer}" onclick="checkAnswer(this.getAttribute('data-answer'))" style="text-shadow: 1px 1px black" />
      </div>
    </div>
    <div class="spacer"></div>
  </div>
</main>

<!-- Кнопка возврата -->
<a href="/" class="back-button">Вернуться на главный экран</a>

</body>
</html>
